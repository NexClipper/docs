<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-122075277-7","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="NexClipper" href="/opensearch.xml"><title data-react-helmet="true">Prometheus Exporter &amp; ExporterHub (Eng.) | NexClipper</title><meta data-react-helmet="true" property="og:title" content="Prometheus Exporter &amp; ExporterHub (Eng.) | NexClipper"><meta data-react-helmet="true" name="description" content="Talk about client libraries and exporters that are essential components of the Prometheus open source, as well as [ExporterHub.io] (http://exporterhub.io) currently under development and a roadmap for NexClipper in the future."><meta data-react-helmet="true" property="og:description" content="Talk about client libraries and exporters that are essential components of the Prometheus open source, as well as [ExporterHub.io] (http://exporterhub.io) currently under development and a roadmap for NexClipper in the future."><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link rel="stylesheet" href="/styles.bdd5e959.css">
<link rel="preload" href="/styles.3a1d2610.js" as="script">
<link rel="preload" href="/runtime~main.0d818b84.js" as="script">
<link rel="preload" href="/main.d2503ef0.js" as="script">
<link rel="preload" href="/1.06c5a078.js" as="script">
<link rel="preload" href="/2.83df97ae.js" as="script">
<link rel="preload" href="/3.1fc233e4.js" as="script">
<link rel="preload" href="/ccc49370.72a44418.js" as="script">
<link rel="preload" href="/529083b6.71d10e05.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/NexClipper_200.svg" alt="NexClipper Logo"><strong class="navbar__title">NexClipper</strong></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://NexClipper.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support</a></div><div class="navbar__items navbar__items--right"><a href="https://console.nexclipper.io/login" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a><a href="https://github.com/NexClipper/NexClipper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/NexClipper_200.svg" alt="NexClipper Logo"><strong class="navbar__title">NexClipper</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://console.nexclipper.io/login" target="_blank" rel="noopener noreferrer" class="menu__link">Login</a></li><li class="menu__list-item"><a href="https://github.com/NexClipper/NexClipper" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://NexClipper.io" target="_blank" rel="noopener noreferrer" class="menu__link">Support</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_1mse">Prometheus Exporter &amp; ExporterHub (Eng.)</h1><div class="margin-vert--md"><time datetime="2020-09-25T00:00:00.000Z" class="blogPostDate_3bQP">September 25, 2020  Â· 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/ddiiwoong" target="_blank" rel="noreferrer noopener"><img src="https://avatars1.githubusercontent.com/u/37430952?v=4" alt="Jinwoong Kim"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/ddiiwoong" target="_blank" rel="noreferrer noopener">Jinwoong Kim</a></h4><small class="avatar__subtitle">NexClipper</small></div></div></header><section class="markdown"><p>Today, I&#x27;m going to explain about the Prometheus exporter.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prometheus-ecosystem-components"></a>Prometheus ecosystem components<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prometheus-ecosystem-components" title="Direct link to heading">#</a></h3><p>Prometheus is basically instrumenting the metrics of an application or a third-party system (service), which is usually scraped through the target endpoint.</p><ul><li>Prometheus default port allocations :Â <a href="https://github.com/prometheus/prometheus/wiki/Default-port-allocations" target="_blank" rel="noopener noreferrer">https://github.com/prometheus/prometheus/wiki/Default-port-allocations</a></li></ul><p>Not all applications or services generate Prometheus compatible metrics. Therefore, collection targets that are Prometheus targets can be collected in the format of client libraries and exporters.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="client-library"></a>Client Library<a aria-hidden="true" tabindex="-1" class="hash-link" href="#client-library" title="Direct link to heading">#</a></h3><p>The best way to set up monitoring when developing service is to use the Prometheus client library to write and instrument metrics directly based on code inline.</p><p>By default, Go, Java (Scala), Python, and Ruby provide official libraries.</p><ul><li>Client Library : <a href="https://prometheus.io/docs/instrumenting/clientlibs/" target="_blank" rel="noopener noreferrer">https://prometheus.io/docs/instrumenting/clientlibs/</a></li></ul><p>Since unofficial libraries are run by users in the community, they can also be a problem with code maintenance, so you should always use them while checking the release information.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="exporter"></a>Exporter<a aria-hidden="true" tabindex="-1" class="hash-link" href="#exporter" title="Direct link to heading">#</a></h3><p>Exporters can expose metrics from packaged software or third-party systems (services) where code cannot be modified directly. Usually, vendors or service companies expose metrics directly, but a separate exporter is required to instrument software such as the Linux system kernel, network equipment, storage, and databases.</p><p>Almost all services are provided by the community and users, and you can check the status of exporters from the link below.</p><ul><li>Exporter : <a href="https://prometheus.io/docs/instrumenting/exporters/" target="_blank" rel="noopener noreferrer">https://prometheus.io/docs/instrumenting/exporters/</a></li><li><a href="http://exporterhub.io" target="_blank" rel="noopener noreferrer">ExporterHub.io</a> : Exporter catalog page recently released by NexCloud</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-the-client-library"></a>Using the Client Library<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-the-client-library" title="Direct link to heading">#</a></h3><p>I&#x27;m going to show a simple example of using the client library. The code was used earlier in Spinnaker based Canary deployment test.</p><ul><li>Python client library : <a href="https://github.com/prometheus/client_python" target="_blank" rel="noopener noreferrer">https://github.com/prometheus/client_python</a></li></ul><p>Let&#x27;s take a quick look at the code. The <code>app.py</code> was written based on Python Flask, and with the <code>prometheus_client</code> library added,  I used <code>start_http_server</code> for the metric HTTP endpoint (:8080).</p><p>Simply generate the internal 500 error in the desired ratio and to confirm an artificial metric, create <code>success_rate</code> variable and configure a simple metric server(:8000) to instrumentate with  <code>Gauge</code>, <code>Counter</code>.</p><p>To check the <code>Counter</code> metric type, set the label to <code>http_code=&#x27;500&#x27;</code>, <code>http_code=&#x27;200&#x27;</code>.</p><p>Finally, to declare it as a <code>Gauge</code> metric type, add a code of g.set(rate_responce).</p><blockquote><p>Exposed endpoints and exporters may be set to different paths, as shown above, but use the /metrics path as usual. ex) <a href="http://localhost:8000/metrics" target="_blank" rel="noopener noreferrer">http://localhost:8000/metrics</a></p></blockquote><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#!/usr/bin/env python</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> random </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> randrange </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> flask </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Flask </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> prometheus_client </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> start_http_server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Gauge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Counter </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> sys</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Flask</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;python-library-test&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;requests&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Number of requests served, by http code&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http_code&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">g </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Gauge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rate_requests&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Rate of success requests&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">responce_500 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">responce_200 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rate_responce </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">success_rate </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Input variable to generate an internal 500 error at the desired rate</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@app</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">hello</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">global</span><span class="token plain"> responce_500 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">global</span><span class="token plain"> responce_200 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">global</span><span class="token plain"> rate_responce </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> randrange</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">success_rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">http_code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;500&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">inc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        responce_500 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> responce_500 </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        rate_responce </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> responce_500 </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">responce_500</span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain">responce_200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rate_responce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Internal Server Error\\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">http_code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;200&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">inc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        responce_200 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> responce_200 </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        rate_responce </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> responce_500 </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">responce_500</span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain">responce_200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rate_responce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World!\\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">start_http_server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">8000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">host </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;0.0.0.0&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> port </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>It is for testing purposes, letâ€™s simply run locally.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ pip install flask prometheus_client</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ python app.py 50 # Input variable to generate an internal 500 error at the desired rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Serving Flask app &quot;python-library-test&quot; (lazy loading)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Environment: production</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   WARNING: This is a development server. Do not use it in a production deployment.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Use a production WSGI server instead.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Debug mode: off</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Running on &lt;http://0.0.0.0:8080/&gt; (Press CTRL+C to quit)</span></div></div></div></div></div><p>In order to collect the metrics, we simply use the <code>ab</code> command and make repeated calls.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ab -n 1000 http://localhost:8080/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Server Software:        Werkzeug/1.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Server Hostname:        localhost</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Server Port:            8080</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Document Path:          /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Document Length:        22 bytes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Concurrency Level:      1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Time taken for tests:   1.775 seconds</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Complete requests:      1000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Failed requests:        0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Non-2xx responses:      505</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div></div></div></div></div><p>Requests, Non-2xx responses should be looked at in detail in the results.</p><p>Because an error was generated by making 1000 requests with a 50% probability of the input factor, success can be confirmed as 495 times and errors 505 times.</p><p>Let&#x27;s try connecting to the exposed port 8000 to check the metrics.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl localhost:8000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP python_gc_objects_collected_total Objects collected during gc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE python_gc_objects_collected_total counter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_objects_collected_total{generation=&quot;0&quot;} 18055.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_objects_collected_total{generation=&quot;1&quot;} 2461.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_objects_collected_total{generation=&quot;2&quot;} 0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP python_gc_objects_uncollectable_total Uncollectable object found during GC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE python_gc_objects_uncollectable_total counter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_objects_uncollectable_total{generation=&quot;0&quot;} 0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_objects_uncollectable_total{generation=&quot;1&quot;} 0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_objects_uncollectable_total{generation=&quot;2&quot;} 0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP python_gc_collections_total Number of times this generation was collected</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE python_gc_collections_total counter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_collections_total{generation=&quot;0&quot;} 82.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_collections_total{generation=&quot;1&quot;} 7.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_gc_collections_total{generation=&quot;2&quot;} 0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP python_info Python platform information</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE python_info gauge</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python_info{implementation=&quot;CPython&quot;,major=&quot;3&quot;,minor=&quot;8&quot;,patchlevel=&quot;3&quot;,version=&quot;3.8.3&quot;} 1.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP requests_total Number of requests served, by http code</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE requests_total counter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">requests_total{http_code=&quot;500&quot;} 505.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">requests_total{http_code=&quot;200&quot;} 495.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP requests_created Number of requests served, by http code</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE requests_created gauge</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">requests_created{http_code=&quot;500&quot;} 1.5990454944853382e+09</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">requests_created{http_code=&quot;200&quot;} 1.599045494488697e+09</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># HELP rate_requests Rate of success requests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># TYPE rate_requests gauge</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rate_requests 50.5</span></div></div></div></div></div><p>If you look at the <code>http_code=&#x27;500&#x27;</code> and <code>http_code=&#x27;200&#x27;</code>, <code>Counter</code> that I wrote, you can see that it is the same metric I checked in <code>ab</code>.</p><p>And if you look at rate_requests set with <code>Gauge</code>, you can see that the success rate is 50%.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="use-exporter"></a>Use Exporter<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-exporter" title="Direct link to heading">#</a></h3><p>I am currently using macOS and want to use node_exporter to check host metrics.</p><ul><li>node_exporter : <a href="https://github.com/prometheus/node_exporter" target="_blank" rel="noopener noreferrer">https://github.com/prometheus/node_exporter</a></li></ul><p>node_exporter is an exporter officially provided by the Prometheus community and Iâ€™ll try to simply run it by receiving a binary.</p><p>Search node_exporter at <a href="http://exporterhub.io/" target="_blank" rel="noopener noreferrer">ExporterHub.io</a>, which was provided recently by NexCloud as a curation page for community users.</p><p><img src="/assets/images/1*5hGUwC7FtdMqOxizd5UHFQ-4ad7b712b34963c48c21fa3ea5d12866.png"></p><p><a href="https://github.com/NexClipper/exporterhub.io/blob/master/lists/node/README.md" target="_blank" rel="noopener noreferrer">https://github.com/NexClipper/exporterhub.io/blob/master/lists/node/README.md</a></p><p>Referring to the linked readme page above, run node_exporter locally on macOS. Since it is in binary, it can be run as a container, but on macOS, there was an issue with the host network, so I ran it myself.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ wget  https://github.com/prometheus/node_exporter/releases/download/v1.0.1/node_exporter-1.0.1.darwin-amd64.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tar -xzf node_exporter-1.0.1.darwin-amd64.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd node_exporter-1.0.1.darwin-amd64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ./node_exporter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.309Z caller=node_exporter.go:177 msg=&quot;Starting node_exporter&quot; version=&quot;(version=1.0.1, branch=HEAD, revision=3715be6ae899f2a9b9dbfd9c39f3e09a7bd4559f)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.309Z caller=node_exporter.go:178 msg=&quot;Build context&quot; build_context=&quot;(go=go1.14.4, user=root@4c8e5c628328, date=20200616-12:52:07)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.309Z caller=node_exporter.go:105 msg=&quot;Enabled collectors&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.309Z caller=node_exporter.go:112 collector=boottime</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=cpu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=diskstats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=filesystem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=loadavg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=meminfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=netdev</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=textfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:112 collector=uname</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=node_exporter.go:191 msg=&quot;Listening on&quot; address=:9100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">level=info ts=2020-09-02T12:31:03.310Z caller=tls_config.go:170 msg=&quot;TLS is disabled and it cannot be enabled on the fly.&quot; http2=false</span></div></div></div></div></div><p>Basically, as mentioned above, there are reserved port information and node_exporter exposed to /metrics endpoint, so try to access http://localhost:9100/metrics. You can check the machine metrics of the MacBook currently in use.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">//</span><span class="token plain">localhost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">9100</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># HELP node_cpu_seconds_total Seconds the cpus spent in each mode.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># TYPE node_cpu_seconds_total counter</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;idle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">25639.47</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;nice&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6361.26</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12627.86</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;idle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">37124.82</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;nice&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2697.6</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4805.51</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;idle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">26546.08</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;nice&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5505.62</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12576.23</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;idle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">37708.71</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;nice&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2413.04</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node_cpu_seconds_total</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4506.18</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span></div></div></div></div></div><p>Since the process of linking with Prometheus is a setting change, I will not mention it here.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="exporterhubio"></a>ExporterHub.io<a aria-hidden="true" tabindex="-1" class="hash-link" href="#exporterhubio" title="Direct link to heading">#</a></h3><p><a href="http://exporterhub.io/" target="_blank" rel="noopener noreferrer">ExporterHub.io</a> was created for Prometheus community users, and was created for the purpose of providing a curation list similar to the awesome project.</p><p>Not only curation information but also simple installation guide, alert-rule setting, and dashboard related information can be viewed at once.</p><p>The roadmap for the future is as follows.</p><ul><li>Create alert-rule for each exporter</li><li>Search, page enhancement, Automate update exporter&#x27;s release</li><li>NexClipper Cloud service integration</li></ul><p>NexClipper Cloud service will be opened towards the end of the year, and various convenient features related to the Prometheus ecosystem will be included before the official launch next year.</p><p>If you have an exporter under development or have any corrections or improvements, please feel free to send issues or pull requests.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="summary"></a>Summary<a aria-hidden="true" tabindex="-1" class="hash-link" href="#summary" title="Direct link to heading">#</a></h3><p>In this post, we talked about the client library and exporter, which are essential components of Prometheus open source. We also explained the roadmap for the integration of <a href="http://exporterhub.io" target="_blank" rel="noopener noreferrer">ExporterHub.io</a> and NexClipper in the future.</p><p>We ask for a variety of feedback on all our technologies and products, including blog content, and if you have any questions at any time, or have any necessary matters such as recruitment and technical meetings, please contact us at <a href="mailto:support@nexclipper.io" target="_blank" rel="noopener noreferrer">support@nexclipper.io</a> and we will reply as soon as possible.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/prometheus">Prometheus</a><a class="margin-horiz--sm" href="/blog/tags/exporter">Exporter</a></div></footer></article><div><a href="https://github.com/NexClipper/docs/edit/master/blog/blog/2020-09-25-prometheus-exporter-exporterhub-en.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/09/03/prometheus-exporter-exporterhub"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Prometheus Exporter &amp; ExporterHub Â»</div></a></div></nav></div></div><div class="col col--2"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prometheus-ecosystem-components" class="table-of-contents__link">Prometheus ecosystem components</a></li><li><a href="#client-library" class="table-of-contents__link">Client Library</a></li><li><a href="#exporter" class="table-of-contents__link">Exporter</a></li><li><a href="#using-the-client-library" class="table-of-contents__link">Using the Client Library</a></li><li><a href="#use-exporter" class="table-of-contents__link">Use Exporter</a></li><li><a href="#exporterhubio" class="table-of-contents__link">ExporterHub.io</a></li><li><a href="#summary" class="table-of-contents__link">Summary</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/start">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">What is NexClipper?</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="http://nexclipper.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/nexclipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/NexClipper/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/NexClipper/NexClipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 NexCloud, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.3a1d2610.js"></script>
<script src="/runtime~main.0d818b84.js"></script>
<script src="/main.d2503ef0.js"></script>
<script src="/1.06c5a078.js"></script>
<script src="/2.83df97ae.js"></script>
<script src="/3.1fc233e4.js"></script>
<script src="/ccc49370.72a44418.js"></script>
<script src="/529083b6.71d10e05.js"></script>
</body>
</html>